<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="home.css">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="icon" type="image/x-icon" href="./deepkreis-logo.png">
    <title>Deep Kreis</title>
</head>
<body>
   
    <div class="container">
        <p id="userId" hidden><%= warrior.id %></p>
        <p id="warriorName" hidden><%= warrior.username %></p>
        <div class="posts">
            <% posts.forEach(post => { %>
                <div class="post">
                    <p class="postId" hidden><%= post.id %></p>
                    <div class="user">
                        <img src="<%= post.warrior_pic %>" alt="no">
                        <p class="username"><%= post.warrior_name %></p>
                        <% const d = post.created_at.toString().split(' ') %>
                        <p class="postDate"><%= `${d[0]} ${d[1]} ${d[2]} ${d[3]}` %></p>
                    </div>
                    <div class="content">
                        <p><%= post.texte %></p>
                        <% if(post.post_pic !== null){ %>
                            <img src="/<%=post.post_pic %>" alt="no">
                        <% } %>
                    </div>
                    <div class="reaction">
                        <p id="likebtn">likes</p>
                        <p id="commentbtn">comments</p>
                    </div>
                    <div class="addcomment">
                        <input class="commentinput" type="text" placeholder=" Add comment...">
                        <button class="addComment">
                            <span id="addComment" class="material-symbols-outlined">send</span>
                        </button>
                    </div>
                    <div class="comments">
                        <p id="close">close</p>
                        <div class="postCommts">
                            
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
        
    </div>


    <div class="head">
        <h1>Deep Kreis</h1>
    </div>
    <div class="nav">
        <a href="/"><li>Community</li></a>
        <a href="/chat"><li>Chat</li></a>
        <a href="/post"><li>Create</li></a>
        <!-- <a href="/community"><li>Community</li></a> -->
        <a href="/profile"><li>Profile</li></a>
    </div>

</body>

<script src="/socket.io/socket.io.js"></script>
<script>

const warriorId = parseInt(document.querySelector('#userId').innerHTML)
const warriorName = document.querySelector('#warriorName').innerHTML



const socket = io()
socket.emit('signin', {userId: warriorId, username: warriorName})
</script>
<script src="./home.js"></script>
</html>